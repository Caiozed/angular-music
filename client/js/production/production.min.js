var app=angular.module("angularMusic",["ngRoute","ngCookies"]);function redirectTo(path){window.location=path}app.config(function($routeProvider){$routeProvider.when("/",{templateUrl:"../templates/start.html"}).when("/signup",{templateUrl:"../templates/signup.html"}).when("/login",{templateUrl:"../templates/login.html"})}),app.controller("signupCtrl",function($scope,$rootScope,$cookies,$http){function request(method,url,data,success,error){$http({method:method,url:url,data:data}).then(function(response){success(response)},function(response){error(response)})}$scope.isLoggedIn=!0,$scope.submitUser=function(username,password,password_confirmation){request("POST","/new/user",{username:username,password:password},function(response){console.log(response),redirectTo("#!login")},function(response){console.log(response)})},$scope.confirmUserData=function(username,password,password_confirmation){username&&password&&password==password_confirmation?$scope.submitUser(username,password,password_confirmation):$scope.messages=["Passwords must match!","Username must have at least 3 characters"]},$scope.login=function(username,password,remember_me){request("POST","/login",{username:username,password:password},function(response){0==response.data.length?$scope.messages=["Wrong username or password"]:(remember_me&&$cookies.put("user_id",response.data[0].id),$rootScope.current_user=response.data[0],redirectTo("#!menu"))},function(response){console.log(response)})}});